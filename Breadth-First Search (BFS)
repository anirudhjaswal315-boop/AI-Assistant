#include <stdio.h>
#include <stdlib.h>

typedef struct Node{ int v; struct Node* next;} Node;
typedef struct Graph{ int V; Node** adj;} Graph;
Node* nn(int v){ Node* n=malloc(sizeof(Node)); n->v=v; n->next=NULL; return n; }
Graph* create(int V){ Graph* g=malloc(sizeof(Graph)); g->V=V; g->adj=malloc(V*sizeof(Node*)); for(int i=0;i<V;i++) g->adj[i]=NULL; return g; }
void addEdge(Graph* g,int s,int d){ Node* n=nn(d); n->next=g->adj[s]; g->adj[s]=n; }

void bfs(Graph* g,int s){
    int *vis=calloc(g->V, sizeof(int));
    int *q=malloc(g->V*sizeof(int)); int front=0, rear=0;
    q[rear++]=s; vis[s]=1;
    while(front<rear){
        int u=q[front++]; printf("%d ",u);
        Node* t=g->adj[u];
        while(t){ if(!vis[t->v]){ q[rear++]=t->v; vis[t->v]=1; } t=t->next; }
    }
    free(vis); free(q);
}

int main(){
    Graph* g=create(4);
    addEdge(g,0,1); addEdge(g,0,2); addEdge(g,1,2); addEdge(g,2,0); addEdge(g,2,3); addEdge(g,3,3);
    bfs(g,2); printf("\n");
    return 0;
}
