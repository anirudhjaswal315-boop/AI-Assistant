#include <stdio.h>
#include <stdlib.h>

typedef struct MinHeap{ int *harr; int capacity; int heap_size; } MinHeap;

MinHeap* create(int cap){ MinHeap* h=malloc(sizeof(MinHeap)); h->capacity=cap; h->heap_size=0; h->harr=malloc(cap*sizeof(int)); return h; }

void swap(int *x,int *y){ int t=*x; *x=*y; *y=t; }

void insertKey(MinHeap* h,int k){
    if(h->heap_size==h->capacity){ printf("Overflow\n"); return; }
    int i=h->heap_size++; h->harr[i]=k;
    while(i!=0 && h->harr[(i-1)/2] > h->harr[i]){ swap(&h->harr[i], &h->harr[(i-1)/2]); i=(i-1)/2; }
}

int extractMin(MinHeap* h){
    if(h->heap_size<=0) return -1;
    if(h->heap_size==1){ h->heap_size--; return h->harr[0]; }
    int root=h->harr[0]; h->harr[0]=h->harr[--h->heap_size];
    heapify:
    int i=0, l=1, r=2;
    while(1){
        int smallest=i;
        if(l<h->heap_size && h->harr[l]<h->harr[smallest]) smallest=l;
        if(r<h->heap_size && h->harr[r]<h->harr[smallest]) smallest=r;
        if(smallest!=i){ swap(&h->harr[i], &h->harr[smallest]); i=smallest; l=2*i+1; r=2*i+2; } else break;
    }
    return root;
}

int main(){
    MinHeap* h=create(10);
    insertKey(h,3); insertKey(h,2); insertKey(h,15);
    printf("%d\n", extractMin(h));
    return 0;
}
