#include <stdio.h>
#include <stdlib.h>

typedef struct T{ int v; struct T *l,*r;} T;
T* newN(int v){ T* n=malloc(sizeof(T)); n->v=v; n->l=n->r=NULL; return n; }
T* insert(T* r,int v){ if(!r) return newN(v); if(v<r->v) r->l=insert(r->l,v); else r->r=insert(r->r,v); return r; }
T* minNode(T* n){ while(n->l) n=n->l; return n; }

T* del(T* root,int v){
    if(!root) return NULL;
    if(v < root->v) root->l = del(root->l,v);
    else if(v > root->v) root->r = del(root->r,v);
    else{
        if(!root->l){ T* t=root->r; free(root); return t; }
        else if(!root->r){ T* t=root->l; free(root); return t; }
        T* t=minNode(root->r); root->v=t->v; root->r=del(root->r,t->v);
    }
    return root;
}

void inorder(T* r){ if(!r) return; inorder(r->l); printf("%d ",r->v); inorder(r->r); }

int main(){
    T* root=NULL;
    int arr[]={50,30,20,40,70,60,80};
    for(int i=0;i<7;i++) root=insert(root,arr[i]);
    inorder(root); printf("\n");
    root=del(root,50);
    inorder(root); printf("\n");
    return 0;
}
