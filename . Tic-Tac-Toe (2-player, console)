#include <stdio.h>

char board[9];

void init(){ for(int i=0;i<9;i++) board[i]='1'+i; }
void printB(){ for(int i=0;i<9;i++){ printf(" %c ",board[i]); if(i%3!=2) printf("|"); if(i%3==2 && i<8) printf("\n---+---+---\n"); } printf("\n"); }

int check(){
    int lines[8][3]={{0,1,2},{3,4,5},{6,7,8},{0,3,6},{1,4,7},{2,5,8},{0,4,8},{2,4,6}};
    for(int i=0;i<8;i++){ char a=board[lines[i][0]]; if(a==board[lines[i][1]] && a==board[lines[i][2]]) return a; }
    for(int i=0;i<9;i++) if(board[i]>='1' && board[i]<='9') return 0;
    return 'D';
}

int main(){
    init(); int player=0;
    while(1){
        printB();
        printf("Player %d move: ", player+1);
        int m; scanf("%d",&m); m--;
        if(m<0||m>8||board[m]=='X'||board[m]=='O'){ printf("Invalid\n"); continue; }
        board[m]= player==0 ? 'X':'O';
        int res=check();
        if(res){ printB(); if(res=='D') printf("Draw\n"); else printf("Player %d wins\n", res=='X'?1:2); break; }
        player^=1;
    }
    return 0;
}
