#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define R 21
#define C 21
int maze[R][C];

void init(){ for(int i=0;i<R;i++) for(int j=0;j<C;j++) maze[i][j]=1; srand(time(NULL)); }

void carve(int x,int y){
    int dirs[4][2]={{2,0},{-2,0},{0,2},{0,-2}};
    for(int i=0;i<4;i++){ int r = rand()%4; int t0=dirs[i][0], t1=dirs[i][1]; dirs[i][0]=dirs[r][0]; dirs[i][1]=dirs[r][1]; dirs[r][0]=t0; dirs[r][1]=t1; }
    for(int i=0;i<4;i++){
        int nx=x+dirs[i][0], ny=y+dirs[i][1];
        if(nx>0 && nx<R-1 && ny>0 && ny<C-1 && maze[nx][ny]==1){ maze[nx][ny]=0; maze[x+dirs[i][0]/2][y+dirs[i][1]/2]=0; carve(nx,ny); }
    }
}

int main(){
    init(); maze[1][1]=0; carve(1,1);
    for(int i=0;i<R;i++){ for(int j=0;j<C;j++) printf(maze[i][j]?"#":" "); printf("\n"); }
    return 0;
}
